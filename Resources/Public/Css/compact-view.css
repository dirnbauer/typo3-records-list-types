/**
 * Compact View CSS - Beautiful Table Design
 * 
 * Modern table with sticky columns, smooth scrolling, and elegant styling
 * Inspired by Notion, Linear, and shadcn design systems
 */

/* =============================================================================
   Design Tokens
   ============================================================================= */

.recordlist-compactview-container {
    /* Colors - uses TYPO3 theme variables (auto-adapt light/dark) with fallbacks */
    --cv-bg: var(--typo3-component-bg, #ffffff);
    --cv-bg-muted: var(--typo3-surface-container-low, #fafafa);
    --cv-bg-subtle: var(--typo3-surface-container-default, #f4f4f5);
    --cv-bg-hidden: var(--typo3-surface-container-lowest, #f5f5f5);
    --cv-border: #e4e4e7;
    --cv-border-muted: #f0f0f2;
    --cv-text: var(--typo3-text-color-base, #18181b);
    --cv-text-muted: var(--typo3-component-color, #52525b);
    --cv-text-subtle: var(--typo3-text-color-variant, #a1a1aa);
    
    /* Accent */
    --cv-accent: var(--typo3-state-default-primary-color, #3b82f6);
    --cv-accent-muted: #93c5fd;
    --cv-accent-bg: var(--typo3-state-default-primary-bg, #eff6ff);
    
    /* Status */
    --cv-success: var(--typo3-state-success-color, #22c55e);
    --cv-success-bg: var(--typo3-state-success-bg, #f0fdf4);
    --cv-danger: var(--typo3-state-danger-color, #ef4444);
    --cv-danger-bg: var(--typo3-state-danger-bg, #fef2f2);
    --cv-warning: var(--typo3-state-warning-color, #f59e0b);
    
    /* Shadows */
    --cv-shadow-sm: var(--typo3-shadow-1, 0 1px 2px 0 rgb(0 0 0 / 0.05));
    --cv-shadow-scroll: 0 0 12px rgba(0, 0, 0, 0.08);
    
    /* Radius */
    --cv-radius: var(--typo3-component-border-radius, 0.5rem);
    --cv-radius-sm: 0.375rem;
    
    /* Typography */
    --cv-font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --cv-font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    
    /* Animation */
    --cv-transition: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --cv-transition-fast: 100ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Fixed column widths */
    --cv-col-checkbox: 28px;
    --cv-col-icon: 26px;
    --cv-col-uid: 60px;
    --cv-col-title: 200px;
    --cv-col-status: 28px;
    --cv-col-action: 26px;

    /* Opaque accent background for hover + selected rows (light mode) */
    --cv-accent-bg-opaque: #dbeafe;
}

/* Dark mode - only override values that TYPO3 vars don't auto-handle */
[data-color-scheme="dark"] .recordlist-compactview-container {
    --cv-border: #3f3f46;
    --cv-border-muted: #2e2e33;
    --cv-accent-bg-opaque: #1e2a3e;
    --cv-shadow-scroll: 0 0 12px rgba(0, 0, 0, 0.3);
}

@media (prefers-color-scheme: dark) {
    html:not([data-color-scheme="light"]) .recordlist-compactview-container {
        --cv-border: #3f3f46;
        --cv-border-muted: #2e2e33;
        --cv-accent-bg-opaque: #1e2a3e;
        --cv-shadow-scroll: 0 0 12px rgba(0, 0, 0, 0.3);
    }
}

/* =============================================================================
   Container (heading base styles are in base.css)
   ============================================================================= */

.recordlist-compactview-container {
    font-family: var(--cv-font-sans);
    /* Container context so cqi units in descendants resolve
       against the actual records content area, not the viewport */
    container-type: inline-size;
    container-name: compactview;
}

/* Sorting label should not wrap */
.recordlist-compactview-container .gridview-sorting__label {
    white-space: nowrap;
    flex-shrink: 0;
}

/* =============================================================================
   Table Wrapper - Horizontal Scroll Container
   ============================================================================= */

.compactview-table-wrapper {
    /* Title column scales with the actual records frame width (cqi),
       not the full viewport. 20cqi = 20% of the compactview container.
       Resolves against .recordlist-compactview-container (container-type: inline-size). */
    --cv-col-title: clamp(150px, 20cqi, 300px);

    position: relative;
    overflow-x: auto;
    overflow-y: visible;
    margin: 0;
    border: 0;
    border-radius: 0;
    background: var(--typo3-component-bg, var(--cv-bg));
    
    /* Smooth scrolling */
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    
    /* Custom scrollbar - Firefox */
    scrollbar-width: thin;
    scrollbar-color: var(--typo3-component-border-color, var(--cv-border)) transparent;
}

/* Custom scrollbar - Webkit */
.compactview-table-wrapper::-webkit-scrollbar {
    height: 8px;
}

.compactview-table-wrapper::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
}

.compactview-table-wrapper::-webkit-scrollbar-thumb {
    background: var(--cv-text-subtle);
    border-radius: 4px;
    border: 2px solid var(--cv-bg);
}

.compactview-table-wrapper::-webkit-scrollbar-thumb:hover {
    background: var(--cv-accent);
}

/* =============================================================================
   Table Structure
   ============================================================================= */

.compactview-table {
    /* min-width: 100% fills container when few columns.
       No explicit width â€” table grows naturally beyond 100%
       when column min-widths exceed the container, enabling scroll. */
    min-width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 0.8125rem;
    table-layout: auto;
}

/* =============================================================================
   Table Header
   ============================================================================= */

.compactview-thead {
    position: sticky;
    top: 0;
    z-index: 15;
}

.compactview-th {
    padding: var(--typo3-list-item-padding-y, 0.25rem) var(--typo3-list-item-padding-x, 0.375rem);
    text-align: left;
    font-weight: 600;
    font-size: inherit;
    color: var(--typo3-component-color, var(--cv-text));
    background: var(--typo3-surface-container-default, var(--cv-bg-subtle));
    border-bottom: var(--typo3-component-border-width, 1px) solid var(--typo3-component-border-color, var(--cv-border));
    white-space: nowrap;
    vertical-align: middle;
}

.compactview-th:first-child {
    border-top-left-radius: var(--cv-radius-sm);
}

.compactview-th:last-child {
    border-top-right-radius: var(--cv-radius-sm);
}

/* =============================================================================
   Sortable Header Dropdowns - Use TYPO3 native styling
   ============================================================================= */

/* 
 * Let TYPO3's native dropdown-toggle-link styling work completely.
 * The .dropdown-static and .dropdown-toggle-link classes from TYPO3 
 * handle all button styling, chevron icons, and interactions.
 */

/* Ensure dropdown inherits table header font weight */
.compactview-th .dropdown-toggle-link {
    font-weight: inherit;
}

/* Legacy sortable header styling (for JavaScript-based sorting) */
.compactview-th--sortable {
    cursor: pointer;
    user-select: none;
    transition: background var(--cv-transition-fast), color var(--cv-transition-fast);
    position: relative;
}

.compactview-th--sortable:hover {
    background: var(--cv-accent-bg);
    color: var(--cv-accent);
}

.compactview-th--sortable.is-active {
    color: var(--cv-accent);
    font-weight: 700;
}

.compactview-th__sort-icon {
    display: inline-flex;
    margin-left: 0.25rem;
    color: var(--cv-accent);
    vertical-align: middle;
}

.compactview-th__sort-icon .icon {
    width: 12px;
    height: 12px;
}

/* Column widths:
   - min-width enforces hard minimum (table-layout:auto can shrink width but not min-width)
   - max-width prevents stretching when table has extra space
   - title has NO max-width so it stretches to fill remaining space */
.compactview-th--checkbox { width: var(--cv-col-checkbox); min-width: var(--cv-col-checkbox); max-width: var(--cv-col-checkbox); text-align: center; }
.compactview-th--icon { width: var(--cv-col-icon); min-width: var(--cv-col-icon); max-width: var(--cv-col-icon); }
.compactview-th--uid { width: var(--cv-col-uid); min-width: var(--cv-col-uid); max-width: var(--cv-col-uid); text-align: right; padding-right: 0.375rem; }
.compactview-th--title { width: var(--cv-col-title); min-width: 150px; }
.compactview-th--status { width: var(--cv-col-status); min-width: var(--cv-col-status); max-width: var(--cv-col-status); }
.compactview-th--action { width: var(--cv-col-action); min-width: var(--cv-col-action); max-width: var(--cv-col-action); }

/* =============================================================================
   Sticky Fixed Columns
   ============================================================================= */

/* Fixed left columns - ensure proper stacking and masking */
.compactview-th--fixed-left,
.compactview-td--fixed-left {
    position: sticky;
    /* MUST be opaque solid color to mask scrolled content behind */
    background-color: var(--cv-bg) !important;
    z-index: 10;
}

.compactview-th--fixed-left {
    background-color: var(--typo3-surface-container-default, var(--cv-bg-subtle)) !important;
    z-index: 16;
}

/* ---- Left positions: WITHOUT clipboard (icon=1, uid=2, title=3) ---- */

.compactview-th--fixed-left:nth-child(1),
.compactview-td--fixed-left:nth-child(1) {
    left: 0;
}

.compactview-th--fixed-left:nth-child(2),
.compactview-td--fixed-left:nth-child(2) {
    left: var(--cv-col-icon);
}

.compactview-th--fixed-left:nth-child(3),
.compactview-td--fixed-left:nth-child(3) {
    left: calc(var(--cv-col-icon) + var(--cv-col-uid));
}

/* Title column is always the last fixed-left column -- separator + shadow */
.compactview-th--title,
.compactview-td--title {
    border-right: 1px solid var(--cv-border-muted);
    box-shadow: none;
    transition: box-shadow var(--cv-transition);
}

/* Left scroll shadow (light) */
.compactview-table-wrapper.is-scrolled .compactview-td--title,
.compactview-table-wrapper.is-scrolled .compactview-th--title {
    box-shadow: 6px 0 16px -4px rgba(0, 0, 0, 0.2);
}

/* Left scroll shadow (dark - bright glow visible on dark backgrounds) */
[data-color-scheme="dark"] .compactview-table-wrapper.is-scrolled .compactview-td--title,
[data-color-scheme="dark"] .compactview-table-wrapper.is-scrolled .compactview-th--title {
    box-shadow: 6px 0 24px -2px rgba(140, 160, 220, 0.3);
}

@media (prefers-color-scheme: dark) {
    html:not([data-color-scheme="light"]) .compactview-table-wrapper.is-scrolled .compactview-td--title,
    html:not([data-color-scheme="light"]) .compactview-table-wrapper.is-scrolled .compactview-th--title {
        box-shadow: 6px 0 24px -2px rgba(140, 160, 220, 0.3);
    }
}

/* ---- Left positions: WITH clipboard (checkbox=1, icon=2, uid=3, title=4) ---- */

.has-clipboard .compactview-th--fixed-left:nth-child(1),
.has-clipboard .compactview-td--fixed-left:nth-child(1) {
    left: 0;
}

.has-clipboard .compactview-th--fixed-left:nth-child(2),
.has-clipboard .compactview-td--fixed-left:nth-child(2) {
    left: var(--cv-col-checkbox);
}

.has-clipboard .compactview-th--fixed-left:nth-child(3),
.has-clipboard .compactview-td--fixed-left:nth-child(3) {
    left: calc(var(--cv-col-checkbox) + var(--cv-col-icon));
}

.has-clipboard .compactview-th--fixed-left:nth-child(4),
.has-clipboard .compactview-td--fixed-left:nth-child(4) {
    left: calc(var(--cv-col-checkbox) + var(--cv-col-icon) + var(--cv-col-uid));
}

/* ---- Fixed right columns (4 columns: status, edit, delete, more) ---- */

.compactview-th--fixed-right,
.compactview-td--fixed-right {
    position: sticky;
    /* MUST be opaque solid color to mask scrolled content behind */
    background-color: var(--cv-bg) !important;
    z-index: 10;
}

.compactview-th--fixed-right {
    background-color: var(--typo3-surface-container-default, var(--cv-bg-subtle)) !important;
    z-index: 16;
}

/* Right positions: more(1), delete(2), edit(3), status(4) from last */
.compactview-th--fixed-right:nth-last-child(1),
.compactview-td--fixed-right:nth-last-child(1) {
    right: 0;
}

.compactview-th--fixed-right:nth-last-child(2),
.compactview-td--fixed-right:nth-last-child(2) {
    right: var(--cv-col-action);
}

.compactview-th--fixed-right:nth-last-child(3),
.compactview-td--fixed-right:nth-last-child(3) {
    right: calc(var(--cv-col-action) * 2);
}

/* Status column (4th from last) - separator + shadow */
.compactview-th--fixed-right:nth-last-child(4),
.compactview-td--fixed-right:nth-last-child(4) {
    right: calc(var(--cv-col-action) * 3);
}

/* Status column is always the first fixed-right column -- separator + shadow */
.compactview-th--status,
.compactview-td--status {
    border-left: 1px solid var(--cv-border-muted);
    box-shadow: none;
    transition: box-shadow var(--cv-transition);
}

/* Right scroll shadow (light) */
.compactview-table-wrapper.has-right-scroll .compactview-td--status,
.compactview-table-wrapper.has-right-scroll .compactview-th--status {
    box-shadow: -6px 0 16px -4px rgba(0, 0, 0, 0.2);
}

/* Right scroll shadow (dark - bright glow visible on dark backgrounds) */
[data-color-scheme="dark"] .compactview-table-wrapper.has-right-scroll .compactview-td--status,
[data-color-scheme="dark"] .compactview-table-wrapper.has-right-scroll .compactview-th--status {
    box-shadow: -6px 0 24px -2px rgba(140, 160, 220, 0.3);
}

@media (prefers-color-scheme: dark) {
    html:not([data-color-scheme="light"]) .compactview-table-wrapper.has-right-scroll .compactview-td--status,
    html:not([data-color-scheme="light"]) .compactview-table-wrapper.has-right-scroll .compactview-th--status {
        box-shadow: -6px 0 24px -2px rgba(140, 160, 220, 0.3);
    }
}

/* =============================================================================
   Table Body & Rows
   ============================================================================= */

.compactview-tbody {
    background: var(--cv-bg);
}

.compactview-row {
    transition: background var(--cv-transition-fast);
}

.compactview-row:last-child .compactview-td:first-child {
    border-bottom-left-radius: var(--cv-radius-sm);
}

.compactview-row:last-child .compactview-td:last-child {
    border-bottom-right-radius: var(--cv-radius-sm);
}

/* Zebra striping - ensure fixed columns match row background (opaque for masking) */
.compactview-row:nth-child(even) .compactview-td {
    background-color: var(--cv-bg-muted);
}

.compactview-row:nth-child(even) .compactview-td--fixed-left,
.compactview-row:nth-child(even) .compactview-td--fixed-right {
    background-color: var(--cv-bg-muted) !important;
}

/* Hover state - all cells use the same opaque accent background.
   Using --cv-accent-bg-opaque everywhere ensures a uniform highlight across
   fixed and scrollable columns in both light and dark mode. */
.compactview-row:hover .compactview-td {
    background-color: var(--cv-accent-bg-opaque) !important;
}

/* Ensure headers have solid opaque background for proper masking */
.compactview-thead .compactview-th--fixed-left,
.compactview-thead .compactview-th--fixed-right {
    background-color: var(--typo3-surface-container-default, var(--cv-bg-subtle)) !important;
}

/* =============================================================================
   Table Cells
   ============================================================================= */

.compactview-td {
    padding: 0.1875rem 0.375rem;
    vertical-align: middle;
    border-bottom: 1px solid var(--cv-border-muted);
    color: var(--cv-text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    background: var(--cv-bg);
}

.compactview-row:last-child .compactview-td {
    border-bottom: none;
}

/* Scrollable field columns: not fixed-left, not fixed-right.
   min-width ensures each gets readable width;
   when many columns exist, total exceeds 100% and the table scrolls. */
.compactview-td[data-field] {
    min-width: 120px;
}

.compactview-th:not(.compactview-th--fixed-left):not(.compactview-th--fixed-right) {
    min-width: 120px;
}

/* Column-specific styling
   Fixed-size columns use max-width to prevent table-layout:auto from
   stretching them when few scrollable columns are present. */
.compactview-td--checkbox {
    width: var(--cv-col-checkbox);
    min-width: var(--cv-col-checkbox);
    max-width: var(--cv-col-checkbox);
    text-align: center;
    padding: 0.1875rem 0.25rem;
}

.compactview-td--icon {
    width: var(--cv-col-icon);
    min-width: var(--cv-col-icon);
    max-width: var(--cv-col-icon);
    text-align: center;
    padding: 0.1875rem 0.125rem;
}

.compactview-td--uid {
    width: var(--cv-col-uid);
    min-width: var(--cv-col-uid);
    max-width: var(--cv-col-uid);
    text-align: right;
    padding-right: 0.375rem;
}

.compactview-td--title {
    width: var(--cv-col-title);
    min-width: 150px;
    color: var(--cv-text);
    font-weight: 500;
}

/* Spacer column - no width constraints, absorbs all remaining space
   so the right action columns are pushed to the edge */
.compactview-th--spacer,
.compactview-td--spacer {
    width: auto;
    padding: 0;
}

.compactview-td--status {
    width: var(--cv-col-status);
    min-width: var(--cv-col-status);
    max-width: var(--cv-col-status);
    text-align: center;
    padding: 0.1875rem 0.125rem;
    overflow: visible;
}

.compactview-td--action {
    width: var(--cv-col-action);
    min-width: var(--cv-col-action);
    max-width: var(--cv-col-action);
    text-align: center;
    padding: 0.1875rem 0.125rem;
    /* Override base td overflow:hidden so dropdown trigger + menu are not clipped */
    overflow: visible;
}

/* =============================================================================
   Row Elements
   ============================================================================= */

.compactview-row__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--cv-text-subtle);
}

.compactview-row__icon .icon {
    width: 12px;
    height: 12px;
}

.compactview-row__uid {
    font-family: var(--cv-font-mono);
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--cv-text-subtle);
}

.compactview-row__title-link {
    color: var(--cv-text);
    text-decoration: none;
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: color var(--cv-transition-fast);
}

.compactview-row__title-link:hover {
    color: var(--cv-accent);
}

/* =============================================================================
   Hidden Record Styling
   ============================================================================= */

.compactview-row--hidden .compactview-td {
    background: var(--cv-bg-hidden);
}

/* Hidden rows: fixed columns MUST have opaque background to mask scrolled content */
.compactview-row--hidden .compactview-td--fixed-left,
.compactview-row--hidden .compactview-td--fixed-right {
    background: var(--cv-bg-hidden) !important;
}

.compactview-row--hidden:nth-child(even) .compactview-td,
.compactview-row--hidden:nth-child(even) .compactview-td--fixed-left,
.compactview-row--hidden:nth-child(even) .compactview-td--fixed-right {
    background: var(--cv-bg-hidden) !important;
}

/* Hidden row hover - same uniform opaque accent */
.compactview-row--hidden:hover .compactview-td {
    background: var(--cv-accent-bg-opaque) !important;
}

.compactview-row--hidden .compactview-row__title-link {
    color: var(--cv-text-muted);
}

.compactview-row--hidden .compactview-row__icon {
    opacity: 0.5;
}

/* =============================================================================
   Field Type Styling - Using TYPO3 State Colors
   ============================================================================= */

.cv-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    font-size: var(--typo3-font-size-small, 0.75rem);
}

.cv-badge .icon {
    width: 12px;
    height: 12px;
}

/* Yes/True state - using TYPO3 success color */
.cv-badge--yes { 
    color: var(--typo3-state-success-color, var(--cv-success)); 
}

/* No/False state - subtle muted color */
.cv-badge--no { 
    color: var(--typo3-text-color-variant, var(--cv-text-subtle)); 
}

.cv-datetime {
    font-family: var(--cv-font-mono);
    font-size: 0.6875rem;
    color: var(--cv-text-muted);
    letter-spacing: -0.01em;
}

.cv-number {
    font-family: var(--cv-font-mono);
    font-weight: 500;
    font-variant-numeric: tabular-nums;
}

.cv-relation {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    color: var(--cv-text-muted);
}

.cv-relation__count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 0.9375rem;
    height: 0.9375rem;
    padding: 0 0.1875rem;
    background: var(--cv-accent-bg);
    color: var(--cv-accent);
    border-radius: 0.1875rem;
    font-family: var(--cv-font-mono);
    font-size: 0.625rem;
    font-weight: 600;
}

/* =============================================================================
   Toggle & Action Buttons
   ============================================================================= */

.cv-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.25rem;
    height: 1.25rem;
    padding: 0;
    border: none;
    border-radius: 0.1875rem;
    cursor: pointer;
    transition: all var(--cv-transition-fast);
}

.cv-toggle .icon {
    width: 12px;
    height: 12px;
}

.cv-toggle--visible {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #16a34a;
}

.cv-toggle--visible:hover {
    background: linear-gradient(135deg, #bbf7d0 0%, #86efac 100%);
    transform: scale(1.05);
}

.cv-toggle--hidden {
    background: var(--cv-bg-subtle);
    color: var(--cv-text-muted);
}

.cv-toggle--hidden:hover {
    background: var(--cv-border);
    transform: scale(1.05);
}

.cv-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.25rem;
    height: 1.25rem;
    padding: 0;
    border: none;
    background: transparent;
    color: var(--cv-text-muted);
    border-radius: 0.1875rem;
    cursor: pointer;
    transition: all var(--cv-transition-fast);
    text-decoration: none;
}

.cv-action .icon {
    width: 12px;
    height: 12px;
}

.cv-action:hover {
    background: var(--cv-bg-subtle);
    color: var(--cv-text);
    transform: scale(1.05);
}

.cv-action--primary:hover {
    background: var(--cv-accent-bg);
    color: var(--cv-accent);
}

.cv-action--danger:hover {
    background: var(--cv-danger-bg);
    color: var(--cv-danger);
}

/* =============================================================================
   Clipboard Checkbox
   ============================================================================= */

/* Checkbox styling - subtle borders, visible in both light and dark mode */
.compactview-th--checkbox .form-check-input,
.compactview-td--checkbox .form-check-input {
    width: 13px;
    height: 13px;
    margin: 0;
    cursor: pointer;
    vertical-align: middle;
    border: 1.5px solid var(--cv-text-subtle);
    border-radius: 2px;
    background-color: transparent;
    appearance: none;
    -webkit-appearance: none;
    display: inline-block;
}

.compactview-th--checkbox .form-check-input:checked,
.compactview-td--checkbox .form-check-input:checked {
    background-color: var(--cv-accent);
    border-color: var(--cv-accent);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e");
    background-size: 10px;
    background-position: center;
    background-repeat: no-repeat;
}

.compactview-th--checkbox .form-check-input:indeterminate {
    background-color: var(--cv-accent);
    border-color: var(--cv-accent);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e");
    background-size: 10px;
    background-position: center;
    background-repeat: no-repeat;
}

/* Highlight row when checkbox is checked - use opaque color for all cells */
.compactview-row.is-clipboard-active .compactview-td {
    background-color: var(--cv-accent-bg-opaque) !important;
}

/* =============================================================================
   Dropdown Menu in Table Rows
   ============================================================================= */

/* Dropdown inside action cells */
.compactview-td .dropdown {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* The dropdown-menu is teleported to <body> by JS (initializeCompactDropdowns)
   to escape the table wrapper's overflow clipping and sticky stacking contexts.
   These styles apply to the teleported menu on <body>. */
.cv-dropdown-teleported {
    position: fixed !important;
    z-index: 1050;
    font-size: 0.8125rem;
    min-width: 10rem;
}

.cv-dropdown-teleported .dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.75rem;
}

.cv-dropdown-teleported .dropdown-item .icon {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

/* Clipboard active state in dropdown */
.cv-dropdown-teleported .dropdown-item.is-clipboard-active {
    color: var(--cv-accent);
    font-weight: 600;
}

/* Fallback: if dropdown-menu stays inside the table (no JS) */
.compactview-td .dropdown-menu {
    z-index: 1050;
    font-size: 0.8125rem;
    min-width: 10rem;
}

/* Note: Sorting toggle, pagination, and recordlist heading base styles
   are in base.css which is loaded automatically for all view modes. */

/* =============================================================================
   Responsive
   ============================================================================= */

@media (max-width: 768px) {
    .compactview-table-wrapper {
        margin: 0.125rem 0.25rem;
        border-radius: var(--cv-radius-sm);
    }
}
